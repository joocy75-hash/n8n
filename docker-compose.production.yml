services:
  n8n:
    image: ghcr.io/joocy75-hash/n8n:latest
    container_name: groupe-n8n
    restart: always
    environment:
      - N8N_HOST=n8n.deepsignal.shop
      - N8N_PORT=5678
      - N8N_PROTOCOL=http
      - NODE_ENV=production
      - WEBHOOK_URL=http://n8n.deepsignal.shop/
      - GENERIC_TIMEZONE=Asia/Seoul
      - N8N_AI_ENABLED=true
      - N8N_AI_ASSISTANT_ENABLED=true
      - N8N_AI_ASSISTANT_BASE_URL=https://assistant.n8n.io
      - N8N_AI_ANTHROPIC_KEY=${N8N_AI_ANTHROPIC_KEY}
    volumes:
      - n8n_data:/home/node/.n8n
    networks:
      - group_e_network
      - proxy-net

volumes:
  n8n_data:

networks:
  group_e_network:
    driver: bridge
  proxy-net:
    external: true
